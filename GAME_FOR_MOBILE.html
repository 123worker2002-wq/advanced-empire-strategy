<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ—¡ï¸ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© + ğŸ¥”ğŸ¥•ğŸŒ± Ø²Ø±Ø§Ø¹Ø© Ù…ØªÙ‚Ø¯Ù…Ø© - War Empire</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #2c1810 0%, #4a2c17 25%, #6b3418 50%, #3d2312 75%, #1a0e08 100%);
            color: #f4e4bc;
            overflow-x: hidden;
            min-height: 100vh;
            background-attachment: fixed;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1a0e08 0%, #3d2312 50%, #6b3418 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease-out;
        }

        .loading-title {
            font-size: 2rem;
            font-weight: 900;
            color: #ffd700;
            text-shadow: 0 0 30px #ff8c00, 0 0 60px #ff8c00;
            margin-bottom: 30px;
            animation: titleGlow 2s ease-in-out infinite alternate;
            text-align: center;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: #d4af37;
            margin-bottom: 40px;
            text-align: center;
            max-width: 600px;
            padding: 0 20px;
        }

        .progress-container {
            width: 80%;
            max-width: 500px;
            height: 20px;
            background: rgba(0,0,0,0.5);
            border: 2px solid #d4af37;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ff6b35, #f7931e, #ffd700, #ff8c00);
            border-radius: 25px;
            position: relative;
            transition: width 0.3s ease;
        }

        .progress-text {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 30px #ff8c00, 0 0 60px #ff8c00; }
            100% { text-shadow: 0 0 50px #ffd700, 0 0 80px #ffd700, 0 0 100px #ff8c00; }
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø®ÙÙŠ */
        .resource-bar {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            background: rgba(26, 14, 8, 0.9);
            border: 2px solid #d4af37;
            border-radius: 15px;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.2);
            opacity: 0;
            transform: translateY(-100px);
            transition: all 0.8s ease;
            z-index: 100;
        }

        .resource-bar.show {
            opacity: 1;
            transform: translateY(0);
        }

        .empire-name {
            font-size: 1rem;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 10px #ff8c00;
        }

        .resources {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .resource-item {
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 500;
            font-size: 0.8rem;
        }

        .resource-icon {
            font-size: 1rem;
        }

        .resource-value {
            color: #f4e4bc;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© */
        .empire-container {
            width: 100%;
            height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            margin-top: 60px;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© */
        .empire-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 8px;
            width: 95%;
            height: 70vh;
            max-height: 600px;
            position: relative;
        }

        /* Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ Ø§Ù„Ù…Ø®ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .building {
            background: linear-gradient(135deg, #6b3418, #3d2312);
            border: 2px solid #8b4513;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0.8);
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        .building.show {
            opacity: 1;
            transform: scale(1);
        }

        .building:hover {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            transform: scale(1.05);
        }

        .building-inner {
            padding: 10px;
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .building-icon {
            font-size: 1.8rem;
            margin-bottom: 5px;
            transition: transform 0.3s ease;
        }

        .building:hover .building-icon {
            transform: scale(1.1);
        }

        .building-name {
            font-size: 0.7rem;
            font-weight: 600;
            color: #d4af37;
            margin-bottom: 3px;
        }

        .building-level {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #8b4513;
            color: #ffd700;
            border: 1px solid #d4af37;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.6rem;
        }

        .building-status {
            position: absolute;
            bottom: 3px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.6rem;
            color: #90ee90;
        }

        .building-info {
            position: absolute;
            bottom: 5px;
            left: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            border-radius: 3px;
            padding: 3px;
            font-size: 0.6rem;
            color: #f4e4bc;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .building:hover .building-info {
            opacity: 1;
        }

        /* Ø§Ù„Ù…Ø¨Ù†Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² */
        .main-building {
            grid-column: 2;
            grid-row: 2;
            background: linear-gradient(135deg, #b8860b, #daa520);
            border: 3px solid #ffd700;
            border-radius: 15px;
            position: relative;
        }

        .main-building .building-inner {
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© */
        .resource-building {
            border-color: #32cd32;
        }

        .military-building {
            border-color: #ff4500;
        }

        .defense-building {
            border-color: #1e90ff;
        }

        .research-building {
            border-color: #9370db;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø²Ø±Ø§Ø¹Ø© - Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± */
        .farming-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: #f4e4bc;
            border: 2px solid #20c997;
            border-radius: 8px;
            padding: 8px 15px;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(139, 69, 19, 0.3);
            margin-bottom: 3px;
            z-index: 99;
        }

        .farming-btn:hover {
            background: linear-gradient(135deg, #20c997, #17a2b8);
            border-color: #17a2b8;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.5);
        }

        .explore-btn {
            position: fixed;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: #f4e4bc;
            border: 2px solid #D2691E;
            border-radius: 8px;
            padding: 8px 15px;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            z-index: 99;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(139, 69, 19, 0.3);
        }

        .explore-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.5);
        }

        .achievements-btn {
            position: fixed;
            top: 50px;
            left: 10px;
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: #f4e4bc;
            border: 2px solid #DAA520;
            border-radius: 8px;
            padding: 8px 15px;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            z-index: 99;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(218, 165, 32, 0.3);
        }

        .achievements-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(218, 165, 32, 0.5);
        }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© */
        .farming-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .farming-modal.show {
            display: flex;
        }

        .farming-content {
            background: linear-gradient(135deg, #2c1810 0%, #4a2c17 50%, #6b3418 100%);
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            max-width: 95vw;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .farming-header {
            text-align: center;
            color: #ffd700;
            margin-bottom: 20px;
        }

        .farming-title {
            font-size: 1.8rem;
            font-weight: 900;
            text-shadow: 0 0 20px #ff8c00;
            margin-bottom: 10px;
        }

        .farming-subtitle {
            font-size: 1rem;
            color: #d4af37;
        }

        .farmers-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .farmer-card {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .farmer-card:hover {
            transform: scale(1.02);
            border-color: #20c997;
            box-shadow: 0 0 15px rgba(32, 201, 151, 0.3);
        }

        .farmer-avatar {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .farmer-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
        }

        .farmer-skill {
            color: #f4e4bc;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .harvest-btn {
            background: linear-gradient(135deg, #28a745, #218838);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 15px;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .harvest-btn:hover {
            background: linear-gradient(135deg, #218838, #1e7e34);
            transform: translateY(-2px);
        }

        .harvest-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .harvest-timer {
            position: absolute;
            top: 3px;
            left: 3px;
            background: rgba(0, 0, 0, 0.8);
            color: #ffd700;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .farmer-ready {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .crops-section, .buckets-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .crop-item, .bucket-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .crop-info, .bucket-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .crop-emoji, .bucket-emoji {
            font-size: 1.2rem;
        }

        .crop-name, .bucket-name {
            font-weight: bold;
            color: #ffd700;
            font-size: 0.9rem;
        }

        .crop-amount, .bucket-count {
            color: #20c997;
            font-weight: bold;
        }

        .close-farming {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-farming:hover {
            background: #218838;
            transform: scale(1.1);
        }

        /* ØªØµÙ…ÙŠÙ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª */
        .achievements-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 14, 8, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 10px;
        }

        .achievements-modal.show {
            opacity: 1;
        }

        .achievements-content {
            background: linear-gradient(135deg, #3d2312, #4a2c17, #6b3418);
            border: 3px solid #DAA520;
            border-radius: 15px;
            padding: 20px;
            max-width: 95vw;
            width: 100%;
            max-height: 80%;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 0 50px rgba(218, 165, 32, 0.3);
        }

        .achievements-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #8b4513;
            padding-bottom: 10px;
        }

        .achievements-header h2 {
            color: #DAA520;
            font-size: 1.5rem;
            margin: 0;
            text-shadow: 0 0 15px #FFD700;
        }

        .achievements-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .achievement-item {
            background: linear-gradient(135deg, rgba(139, 69, 19, 0.3), rgba(160, 82, 45, 0.2));
            border: 2px solid #8b4513;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            position: relative;
        }

        .achievement-item.completed {
            border-color: #DAA520;
            background: linear-gradient(135deg, rgba(218, 165, 32, 0.2), rgba(255, 215, 0, 0.1));
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.3);
        }

        .achievement-item.in-progress {
            border-color: #4169E1;
            background: linear-gradient(135deg, rgba(65, 105, 225, 0.2), rgba(70, 130, 180, 0.1));
        }

        .achievement-item.locked {
            opacity: 0.6;
            border-color: #696969;
        }

        .achievement-icon {
            font-size: 2.5rem;
            min-width: 60px;
            text-align: center;
            filter: brightness(0.9);
        }

        .achievement-item.completed .achievement-icon {
            filter: brightness(1.2) drop-shadow(0 0 10px #FFD700);
            animation: pulse 2s infinite;
        }

        .achievement-info {
            flex: 1;
            text-align: right;
        }

        .achievement-info h3 {
            color: #f4e4bc;
            margin: 0 0 5px 0;
            font-size: 1.1rem;
        }

        .achievement-info p {
            color: #D2691E;
            margin: 0 0 8px 0;
            font-size: 0.9rem;
        }

        .progress-bar {
            background: #2c1810;
            border: 2px solid #8b4513;
            border-radius: 8px;
            height: 10px;
            margin: 5px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
            background: linear-gradient(90deg, #DAA520, #FFD700);
        }

        .achievement-item.completed .progress-fill {
            background: linear-gradient(90deg, #32CD32, #00FF00);
        }

        .progress-text {
            color: #f4e4bc;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .achievement-reward {
            text-align: center;
            min-width: 80px;
        }

        .reward-gold {
            color: #DAA520;
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 3px;
        }

        .reward-gems {
            color: #9370DB;
            font-weight: 600;
            font-size: 0.8rem;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø¹Ø§Ø±Ùƒ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… */
        .battle-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 14, 8, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 10px;
        }

        .battle-modal.show {
            opacity: 1;
        }

        .battle-content {
            background: linear-gradient(135deg, #3d2312, #4a2c17, #6b3418);
            border: 3px solid #D2691E;
            border-radius: 15px;
            padding: 20px;
            max-width: 95vw;
            width: 100%;
            text-align: center;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
        }

        .battle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #8b4513;
            padding-bottom: 10px;
        }

        .battle-header h2 {
            color: #ffd700;
            font-size: 1.4rem;
            margin: 0;
            text-shadow: 0 0 10px #ff8c00;
        }

        .close-btn {
            background: #28a745;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #218838;
            transform: scale(1.1);
        }

        .battle-stats {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 15px 0;
            gap: 10px;
        }

        .player-stats, .enemy-stats {
            flex: 1;
            text-align: center;
        }

        .player-stats h3 {
            color: #4CAF50;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .enemy-stats h3 {
            color: #f44336;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .power-bar {
            background: #2c1810;
            border: 2px solid #8b4513;
            border-radius: 8px;
            height: 15px;
            margin: 8px 0;
            overflow: hidden;
        }

        .power-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .power-fill.player {
            background: linear-gradient(90deg, #4CAF50, #66BB6A);
        }

        .power-fill.enemy {
            background: linear-gradient(90deg, #f44336, #e57373);
        }

        .vs {
            font-size: 1.5rem;
            color: #ffd700;
            font-weight: bold;
            text-shadow: 0 0 10px #ff8c00;
        }

        .battle-actions {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .attack-btn, .strategy-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .attack-btn {
            background: linear-gradient(135deg, #28a745, #218838);
            color: white;
        }

        .attack-btn:hover {
            background: linear-gradient(135deg, #218838, #1e7e34);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
        }

        .strategy-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .strategy-btn:hover {
            background: linear-gradient(135deg, #20c997, #17a2b8);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.4);
        }

        .battle-info {
            background: rgba(139, 69, 19, 0.3);
            border-radius: 8px;
            padding: 10px;
            margin-top: 15px;
        }

        .battle-info h4 {
            color: #ffd700;
            margin-bottom: 8px;
        }

        .battle-info p {
            color: #f4e4bc;
            margin: 3px 0;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        @media (max-width: 480px) {
            .empire-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(6, 1fr);
                gap: 5px;
            }
            
            .farming-title {
                font-size: 1.4rem;
            }
            
            .farmers-section {
                grid-template-columns: 1fr;
            }
            
            .building-icon {
                font-size: 1.5rem;
            }
            
            .building-name {
                font-size: 0.6rem;
            }
        }

        /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø®ÙÙŠØ© */
        .notification {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(26, 14, 8, 0.95);
            border: 2px solid #d4af37;
            border-radius: 8px;
            padding: 10px 20px;
            color: #f4e4bc;
            font-size: 0.9rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
            opacity: 0;
            transform: translate(-50%, -30px);
            transition: all 0.5s ease;
            z-index: 1000;
            max-width: 90%;
            text-align: center;
        }

        .notification.show {
            opacity: 1;
            transform: translate(-50%, 0);
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø®Ø§ØµØ© Ù„Ù„Ù…Ø¨Ø§Ù†ÙŠ */
        .power-station { background: linear-gradient(135deg, #4169e1, #1e90ff); }
        .gold-mine { background: linear-gradient(135deg, #daa520, #b8860b); }
        .palace { background: linear-gradient(135deg, #8b008b, #da70d6); }
        .military-camp { background: linear-gradient(135deg, #8b0000, #ff4500); }
        .research-lab { background: linear-gradient(135deg, #483d8b, #6a5acd); }
        .market { background: linear-gradient(135deg, #2e8b57, #32cd32); }
        .barracks { background: linear-gradient(135deg, #800000, #cd5c5c); }
        .academy { background: linear-gradient(135deg, #191970, #4169e1); }
        .watchtower { background: linear-gradient(135deg, #8b4513, #d2691e); }
        .tower-defense { background: linear-gradient(135deg, #483d8b, #6a5acd); }
        .hospital { background: linear-gradient(135deg, #dc143c, #ff69b4); }
        .factory { background: linear-gradient(135deg, #2f4f4f, #708090); }
        .training-ground { background: linear-gradient(135deg, #228b22, #32cd32); }
        .warehouse { background: linear-gradient(135deg, #8b4513, #d2691e); }
        .harbor { background: linear-gradient(135deg, #191970, #4169e1); }
        .workshop { background: linear-gradient(135deg, #8b0000, #b22222); }
        .observatory { background: linear-gradient(135deg, #191970, #4169e1); }
        .library { background: linear-gradient(135deg, #2e8b57, #32cd32); }
        .forge { background: linear-gradient(135deg, #8b0000, #b22222); }
        .stable { background: linear-gradient(135deg, #8b4513, #a0522d); }
        .gate { background: linear-gradient(135deg, #800000, #cd5c5c); }
        .wall { background: linear-gradient(135deg, #2f4f4f, #708090); }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-title">ğŸ—¡ï¸ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©</div>
        <div class="loading-subtitle">
            Ø¨Ù†Ø§Ø¡ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØªÙƒØŒ ØªØ¯Ø±ÙŠØ¨ Ø¬ÙŠÙˆØ´ÙƒØŒ ÙˆØ¥ØªÙ‚Ø§Ù† ÙÙ† Ø§Ù„Ø­Ø±Ø¨<br>
            ÙˆØ§Ø±Ø¨Ø­ Ø§Ù„Ù…Ø¹Ø§Ø±ÙƒØŒ ÙˆØ·ÙˆØ± ØªÙ‚Ù†ÙŠØ§ØªÙƒØŒ ÙˆÙƒÙ† Ø§Ù„Ø£Ø¹Ø¸Ù…!
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <div class="progress-text" id="progressText">0%</div>
            </div>
        </div>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ -->
    <div class="resource-bar" id="resourceBar">
        <div class="empire-name" id="empireName">ğŸ° Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØªÙŠ</div>
        <div class="resources">
            <div class="resource-item">
                <span class="resource-icon">ğŸ‘¥</span>
                <span class="resource-value" id="population">45,000</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">âš¡</span>
                <span class="resource-value" id="energy">100%</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸ’°</span>
                <span class="resource-value" id="gold">250,000</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">âš”ï¸</span>
                <span class="resource-value" id="troops">15,000</span>
            </div>
            <div class="resource-item">
                <span class="resource-icon">ğŸ’</span>
                <span class="resource-value" id="gems">1,250</span>
            </div>
        </div>
    </div>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© -->
    <div class="empire-container">
        <div class="empire-grid" id="empireGrid">
            <!-- Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ Ø³ØªÙˆÙ„Ø¯ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
        </div>
    </div>

    <!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="notification" id="notification"></div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        let gameState = {
            loading: 0,
            loadingComplete: false,
            population: 45000,
            energy: 100,
            gold: 250000,
            troops: 15000,
            gems: 1250,
            empireName: 'Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØªÙŠ Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø©',
            empireLevel: 47,
            empirePoints: 285750,
            empireRank: '#12',
            camps: 8,
            research: '18/25',
            buildings: [],
            resources: {
                food: 85000,
                stone: 125000,
                wood: 95000,
                iron: 75000
            },
            // Ù†Ø¸Ø§Ù… Ø§Ù„Ø²Ø±Ø§Ø¹Ø©
            crops: {
                potato: 0,      // Ø§Ù„Ø¨Ø·Ø§Ø·Ø§
                beans: 0,       // Ø§Ù„Ø¨ØªØ¨Ø±ÙŠ
                wheat: 100,     // Ø§Ù„Ù‚Ù…Ø­
                corn: 50,       // Ø§Ù„Ø°Ø±Ø©
                barley: 30,     // Ø§Ù„Ø´Ø¹ÙŠØ±
                kreek: 25,      // Ø§Ù„ÙƒØ±ÙŠÙƒ
                toria: 15       // Ø§Ù„Ø·ÙˆØ±ÙŠØ§
            },
            buckets: {
                red: { name: 'Ø§Ù„Ø¯Ù„Ùˆ Ø§Ù„Ø£Ø­Ù…Ø±', count: 0, bonus: 1.1 },
                blue: { name: 'Ø§Ù„Ø¯Ù„Ùˆ Ø§Ù„Ø£Ø²Ø±Ù‚', count: 0, bonus: 1.15 },
                green: { name: 'Ø§Ù„Ø¯Ù„Ùˆ Ø§Ù„Ø£Ø®Ø¶Ø±', count: 0, bonus: 1.2 },
                gold: { name: 'Ø§Ù„Ø¯Ù„Ùˆ Ø§Ù„Ø°Ù‡Ø¨ÙŠ', count: 1, bonus: 1.3 }
            },
            farmers: [
                {
                    id: 'abraham_son_1',
                    name: 'Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ø¨Ø·Ù„ Ø§Ù„Ø¨Ø·Ø§Ø·Ø§',
                    harvestBonus: 2,
                    crop: 'potato',
                    level: 1
                },
                {
                    id: 'abraham_son_2',
                    name: 'Ø¥Ø³Ø­Ø§Ù‚',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ø¨Ø·Ù„ Ø§Ù„Ø¨ØªØ¨Ø±ÙŠ',
                    harvestBonus: 2,
                    crop: 'beans',
                    level: 1
                },
                {
                    id: 'abraham_son_3',
                    name: 'ÙŠÙˆØ³Ù',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ø®Ø¨ÙŠØ± Ø§Ù„Ù‚Ù…Ø­',
                    harvestBonus: 1.5,
                    crop: 'wheat',
                    level: 2
                },
                {
                    id: 'abraham_son_4',
                    name: 'ÙŠØ¹Ù‚ÙˆØ¨',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ø®Ø¨ÙŠØ± Ø§Ù„Ø°Ø±Ø©',
                    harvestBonus: 1.5,
                    crop: 'corn',
                    level: 2
                },
                {
                    id: 'abraham_son_5',
                    name: 'Ù…ÙˆØ³Ù‰',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ø®Ø¨ÙŠØ± Ø§Ù„Ø´Ø¹ÙŠØ±',
                    harvestBonus: 1.5,
                    crop: 'barley',
                    level: 2
                },
                {
                    id: 'abraham_son_6',
                    name: 'Ù‡Ø§Ø±ÙˆÙ†',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ù…Ø¹Ù„Ù… Ø§Ù„ÙƒØ±ÙŠÙƒ',
                    harvestBonus: 1.8,
                    crop: 'kreek',
                    level: 3
                },
                {
                    id: 'abraham_son_7',
                    name: 'Ø¯Ø§ÙˆÙˆØ¯',
                    avatar: 'ğŸ‘¨â€ğŸŒ¾',
                    skill: 'Ø³Ø§Ø­Ø± Ø§Ù„Ø·ÙˆØ±ÙŠØ§',
                    harvestBonus: 2.2,
                    crop: 'toria',
                    level: 4
                }
            ],
            harvestTimers: {}
        };

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©
        const buildingTypes = [
            // Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            { 
                name: 'ğŸ° Ø§Ù„Ù‚ØµØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠ', 
                type: 'palace', 
                level: 10, 
                category: 'main',
                production: '+500 Ø¬Ù†Ø¯ / Ø³Ø§Ø¹Ø©',
                description: 'Ø§Ù„Ù…Ù‚Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© - ÙŠØ²ÙŠØ¯ Ù…Ù† Ù†Ø³Ø¨Ø© Ø¥Ù†ØªØ§Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ Ø§Ù„Ø£Ø®Ø±Ù‰',
                position: { row: 2, col: 2 }
            },
            { 
                name: 'âš¡ Ù…Ø­Ø·Ø© Ø§Ù„Ø·Ø§Ù‚Ø©', 
                type: 'power-station', 
                level: 8, 
                category: 'resource',
                production: '+250 Ø·Ø§Ù‚Ø© / Ø³Ø§Ø¹Ø©',
                description: 'ØªÙ†ØªØ¬ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ',
                position: { row: 1, col: 1 }
            },
            { 
                name: 'â›ï¸ Ù…Ù†Ø¬Ù… Ø§Ù„Ø°Ù‡Ø¨', 
                type: 'gold-mine', 
                level: 9, 
                category: 'resource',
                production: '+800 Ø°Ù‡Ø¨ / Ø¯Ù‚ÙŠÙ‚Ø©',
                description: 'ÙŠÙ†ØªØ¬ Ø§Ù„Ø°Ù‡Ø¨ - Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©',
                position: { row: 3, col: 1 }
            },
            { 
                name: 'ğŸ¢ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ÙƒØ¨Ø±Ù‰', 
                type: 'market', 
                level: 6, 
                category: 'trade',
                production: '+20% Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ¬Ø§Ø±Ø©',
                description: 'ÙŠØ¯ÙŠØ± ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ÙˆÙŠØ²ÙŠØ¯ Ù…Ù† Ø³Ø±Ø¹Ø© Ø¬Ù…Ø¹ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯',
                position: { row: 1, col: 3 }
            },
            { 
                name: 'ğŸ­ Ù…ØµÙ†Ø¹ Ø§Ù„Ø£Ø³Ù„Ø­Ø©', 
                type: 'factory', 
                level: 7, 
                category: 'military',
                production: '+150 Ø³Ù„Ø¹Ø© Ø¹Ø³ÙƒØ±ÙŠØ© / Ø³Ø§Ø¹Ø©',
                description: 'ÙŠÙ†ØªØ¬ Ø§Ù„Ø£Ø³Ù„Ø­Ø© ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ© Ù„Ù„Ø¬Ù†ÙˆØ¯',
                position: { row: 4, col: 1 }
            },
            { 
                name: 'ğŸ•ï¸ Ù…Ø¹Ø³ÙƒØ± Ø§Ù„ÙØ±Ø³Ø§Ù†', 
                type: 'barracks', 
                level: 6, 
                category: 'military',
                production: '+25 ÙØ±Ø³Ø§Ù† / Ø³Ø§Ø¹Ø©',
                description: 'ÙŠØ¯Ø±Ø¨ Ø§Ù„ÙØ±Ø³Ø§Ù† - ÙˆØ­Ø¯Ø§Øª Ø³Ø±ÙŠØ¹Ø© ÙˆÙ…ØªÙ‚Ø¯Ù…Ø©',
                position: { row: 2, col: 1 }
            },
            { 
                name: 'ğŸ¹ Ù…Ø¹Ø³ÙƒØ± Ø§Ù„Ø±Ù…Ø§Ø©', 
                type: 'barracks', 
                level: 5, 
                category: 'military',
                production: '+30 Ø±Ù…Ø§Ø© / Ø³Ø§Ø¹Ø©',
                description: 'ÙŠØ¯Ø±Ø¨ Ø§Ù„Ø±Ù…Ø§Ø© - ÙˆØ­Ø¯Ø§Øª Ø¯ÙØ§Ø¹ÙŠØ© Ù‚ÙˆÙŠØ©',
                position: { row: 3, col: 3 }
            },
            { 
                name: 'âš”ï¸ Ù…Ø¹Ø³ÙƒØ± Ø§Ù„Ù…Ø­Ø§Ø±Ø¨ÙŠÙ†', 
                type: 'military-camp', 
                level: 8, 
                category: 'military',
                production: '+20 Ù…Ø­Ø§Ø±Ø¨ÙŠÙ† / Ø³Ø§Ø¹Ø©',
                description: 'ÙŠØ¯Ø±Ø¨ Ø§Ù„Ù…Ø­Ø§Ø±Ø¨ÙŠÙ† - ÙˆØ­Ø¯Ø§Øª Ù‡Ø¬ÙˆÙ…ÙŠØ© Ù‚ÙˆÙŠØ©',
                position: { row: 4, col: 3 }
            },
            { 
                name: 'ğŸ”¬ Ù…Ø¹Ù…Ù„ Ø§Ù„Ø£Ø¨Ø­Ø§Ø«', 
                type: 'research-lab', 
                level: 7, 
                category: 'research',
                production: '+1 Ø¨Ø­Ø« / 6 Ø³Ø§Ø¹Ø§Øª',
                description: 'ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØªÙ‚Ù†ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ…ØªÙ‚Ø¯Ù…Ø©',
                position: { row: 1, col: 2 }
            },
            { 
                name: 'ğŸ—¼ Ø¨Ø±Ø¬ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©', 
                type: 'watchtower', 
                level: 8, 
                category: 'defense',
                production: '+200% Ø¯ÙØ§Ø¹',
                description: 'ÙŠØ­Ù…ÙŠ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ù…Ù† Ø§Ù„Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©',
                position: { row: 3, col: 2 }
            }
        ];

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„
        const cropSettings = {
            potato: {
                name: 'Ø§Ù„Ø¨Ø·Ø§Ø·Ø§',
                emoji: 'ğŸ¥”',
                baseReward: 50,
                growthTime: 30000, // 30 Ø«Ø§Ù†ÙŠØ©
                rarity: 'common'
            },
            beans: {
                name: 'Ø§Ù„Ø¨ØªØ¨Ø±ÙŠ',
                emoji: 'ğŸ«˜',
                baseReward: 45,
                growthTime: 25000, // 25 Ø«Ø§Ù†ÙŠØ©
                rarity: 'common'
            },
            wheat: {
                name: 'Ø§Ù„Ù‚Ù…Ø­',
                emoji: 'ğŸŒ¾',
                baseReward: 40,
                growthTime: 20000, // 20 Ø«Ø§Ù†ÙŠØ©
                rarity: 'common'
            },
            corn: {
                name: 'Ø§Ù„Ø°Ø±Ø©',
                emoji: 'ğŸŒ½',
                baseReward: 60,
                growthTime: 35000, // 35 Ø«Ø§Ù†ÙŠØ©
                rarity: 'rare'
            },
            barley: {
                name: 'Ø§Ù„Ø´Ø¹ÙŠØ±',
                emoji: 'ğŸŒ¾',
                baseReward: 35,
                growthTime: 18000, // 18 Ø«Ø§Ù†ÙŠØ©
                rarity: 'common'
            },
            kreek: {
                name: 'Ø§Ù„ÙƒØ±ÙŠÙƒ',
                emoji: 'ğŸ¥•',
                baseReward: 55,
                growthTime: 28000, // 28 Ø«Ø§Ù†ÙŠØ©
                rarity: 'uncommon'
            },
            toria: {
                name: 'Ø§Ù„Ø·ÙˆØ±ÙŠØ§',
                emoji: 'ğŸŒ±',
                baseReward: 70,
                growthTime: 40000, // 40 Ø«Ø§Ù†ÙŠØ©
                rarity: 'rare'
            }
        };

        //åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
            generateBuildings();
            
            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø²Ø±Ø§Ø¹Ø©
            addFarmingButton();
            
            // Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
            startLoading();
        }

        // Ø¨Ø¯Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function startLoading() {
            const loadingScreen = document.getElementById('loadingScreen');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const resourceBar = document.getElementById('resourceBar');

            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 8 + 2; // 2-10% each time
                if (progress > 100) progress = 100;

                progressBar.style.width = progress + '%';
                progressText.textContent = Math.floor(progress) + '%';

                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙˆØ§Ø±Ø¯
                            setTimeout(() => {
                                resourceBar.classList.add('show');
                            }, 500);
                            
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹
                            showBuildings();
                            
                            // Ø¨Ø¯Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ§Ø±Ø¯
                            startResourceUpdate();
                            startResourceGeneration();
                            
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠØ¨
                            showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØªÙƒ! ğŸ°', 3000);
                            
                            // ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
                            initializeAchievements();
                            
                            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
                            setTimeout(() => {
                                addExploreButton();
                                showNotification('ØªÙ… ÙØªØ­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª! ğŸ—ºï¸ğŸ† Ø¬Ø±Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø±', 5000);
                            }, 2000);
                            
                            gameState.loadingComplete = true;
                        }, 1000);
                    }, 1000);
                }
            }, 200);
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
        function generateBuildings() {
            const grid = document.getElementById('empireGrid');
            grid.innerHTML = '';

            buildingTypes.forEach((building, index) => {
                const buildingElement = document.createElement('div');
                buildingElement.className = `building ${building.type}`;
                buildingElement.style.gridRow = building.position.row;
                buildingElement.style.gridColumn = building.position.col;
                
                buildingElement.innerHTML = `
                    <div class="building-inner">
                        <div class="building-level">${building.level}</div>
                        <div class="building-icon">${building.name.split(' ')[0]}</div>
                        <div class="building-name">${building.name.split(' ').slice(1).join(' ')}</div>
                        <div class="building-status">${building.production}</div>
                        <div class="building-info">${building.description}</div>
                    </div>
                `;

                // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
                buildingElement.addEventListener('click', () => {
                    handleBuildingClick(building, buildingElement);
                });

                grid.appendChild(buildingElement);
                gameState.buildings.push({
                    ...building,
                    element: buildingElement,
                    index: index
                });
            });
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹
        function showBuildings() {
            gameState.buildings.forEach((building, index) => {
                setTimeout(() => {
                    building.element.classList.add('show');
                }, index * 200);
            });
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ù†Ù‰
        function handleBuildingClick(building, element) {
            // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ù‚Ø±
            element.classList.add('clicked');
            setTimeout(() => {
                element.classList.remove('clicked');
            }, 500);

            // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¨Ù†Ù‰
            showBuildingInfo(building);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ§Ø±Ø¯
            if (building.category === 'resource' || building.category === 'military') {
                generateResourceFromBuilding(building);
            }

            // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ø¹ ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
            const messages = {
                'main': 'ØªÙ… ØªØ¹Ø²ÙŠØ² Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©! ğŸ“ˆ',
                'resource': `ØªÙ… Ø¬Ù…Ø¹ ${building.production}! ğŸ’°`,
                'military': `ØªÙ… ØªØ¯Ø±ÙŠØ¨ Ø¬Ù†ÙˆØ¯ Ø¬Ø¯Ø¯! âš”ï¸`,
                'research': 'ØªÙ… Ø¥Ø­Ø±Ø§Ø² ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ø¨Ø­Ø«! ğŸ”¬',
                'defense': 'ØªÙ… ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø¯ÙØ§Ø¹Ø§Øª! ğŸ›¡ï¸',
                'support': 'ØªÙ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¥Ù†ØªØ§Ø¬! ğŸ­'
            };

            showNotification(messages[building.category] || 'ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«! âœ¨', 2000);
            
            // ÙØ­Øµ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
            setTimeout(() => {
                checkAchievements();
            }, 1000);
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¨Ù†Ù‰
        function showBuildingInfo(building) {
            const info = `
ğŸ›ï¸ ${building.name}
ğŸ“Š Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${building.level}
ğŸ¯ Ø§Ù„ÙØ¦Ø©: ${building.category}
âš¡ Ø§Ù„Ø¥Ù†ØªØ§Ø¬: ${building.production}
ğŸ“ Ø§Ù„ÙˆØµÙ: ${building.description}
            `;
            
            console.log('Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¨Ù†Ù‰:', info);
        }

        // Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù…Ù† Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
        function generateResourceFromBuilding(building) {
            const buildingMultiplier = building.level * 0.1 + 1; // increases with level
            
            switch(building.type) {
                case 'gold-mine':
                    gameState.gold += Math.floor(500 * buildingMultiplier);
                    updateResourceDisplay('gold', gameState.gold);
                    break;
                case 'power-station':
                    gameState.energy = Math.min(100, gameState.energy + 2);
                    updateResourceDisplay('energy', gameState.energy);
                    break;
                case 'barracks':
                case 'military-camp':
                    gameState.troops += Math.floor(50 * buildingMultiplier);
                    updateResourceDisplay('troops', gameState.troops);
                    break;
                case 'research-lab':
                    gameState.gems += Math.floor(1 * buildingMultiplier);
                    updateResourceDisplay('gems', gameState.gems);
                    break;
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯
        function updateResourceDisplay(resource, value) {
            const element = document.getElementById(resource);
            if (element) {
                if (resource === 'energy') {
                    element.textContent = value + '%';
                } else {
                    element.textContent = value.toLocaleString();
                }
            }
        }

        // Ø¨Ø¯Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function startResourceUpdate() {
            setInterval(() => {
                if (gameState.loadingComplete) {
                    // ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø·Ø§Ù‚Ø©
                    const oldEnergy = gameState.energy;
                    gameState.energy = Math.min(100, gameState.energy + 0.5);
                    const energyGained = gameState.energy - oldEnergy;
                    
                    if (energyGained > 0) {
                        gameState.energyConsumed = (gameState.energyConsumed || 0) + energyGained;
                    }
                    
                    updateResourceDisplay('energy', Math.floor(gameState.energy));
                    
                    // ÙØ­Øµ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
                    checkAchievements();
                }
            }, 5000);
        }

        // Ø¨Ø¯Ø¡ Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function startResourceGeneration() {
            setInterval(() => {
                if (gameState.loadingComplete) {
                    // ØªÙˆÙ„ÙŠØ¯ Ø°Ù‡Ø¨ Ù…Ù† Ø§Ù„Ù…Ù†Ø§Ø¬Ù…
                    const goldMines = gameState.buildings.filter(b => b.type === 'gold-mine');
                    goldMines.forEach(mine => {
                        gameState.gold += Math.floor(50 * mine.level);
                    });
                    updateResourceDisplay('gold', gameState.gold);

                    // ØªÙˆÙ„ÙŠØ¯ Ø¬Ù†ÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ø³ÙƒØ±Ø§Øª
                    const barracks = gameState.buildings.filter(b => b.category === 'military');
                    barracks.forEach(barrack => {
                        if (Math.random() > 0.5) { // 50% chance
                            gameState.troops += Math.floor(barrack.level * 0.5);
                        }
                    });
                    updateResourceDisplay('troops', gameState.troops);
                }
            }, 10000); // ÙƒÙ„ 10 Ø«ÙˆØ§Ù†
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', initGame);

        // ØªÙ‡ÙŠØ¦Ø© Ù‚ÙŠÙ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
        function initializeAchievements() {
            if (!gameState.battlesWon) gameState.battlesWon = 0;
            if (!gameState.energyConsumed) gameState.energyConsumed = 0;
            if (!gameState.researchCompleted) gameState.researchCompleted = 0;
            if (!gameState.empireLevel) gameState.empireLevel = 47;
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            playerAchievements = JSON.parse(localStorage.getItem('empireAchievements') || '[]');
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø±Ùƒ
        let currentBattle = null;
        let discoveredEnemies = [];
        
        // Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡ Ù„Ø§Ø³ØªÙƒØ´Ø§ÙÙ‡Ù…
        const enemyTypes = [
            {name: 'ğŸ´â€â˜ ï¸ Ø§Ù„Ù‚Ø±Ø§ØµÙ†Ø© Ø§Ù„Ø¨Ø±Ù…Ø§Ø¦ÙŠØ©', power: 500, reward: {gold: 1000, gems: 5}, difficulty: 1},
            {name: 'ğŸº Ø°Ø¦Ø§Ø¨ Ø§Ù„ØµØ­Ø±Ø§Ø¡', power: 800, reward: {gold: 1500, gems: 8}, difficulty: 2},
            {name: 'ğŸ° Ù‚Ù„Ø¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©', power: 1200, reward: {gold: 2500, gems: 15}, difficulty: 3},
            {name: 'ğŸ‘¹ Ø¹Ù…Ø§Ù„Ù‚Ø© Ø§Ù„Ø¬Ø¨Ø§Ù„', power: 2000, reward: {gold: 5000, gems: 25}, difficulty: 4},
            {name: 'ğŸ² ØªÙ†Ø§Ù†ÙŠÙ† Ø§Ù„Ø¸Ù„Ø§Ù…', power: 3500, reward: {gold: 10000, gems: 50}, difficulty: 5},
            {name: 'âš”ï¸ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©é’¢é“ Ø§Ù„Ø§Ø³ÙˆØ¯', power: 5000, reward: {gold: 20000, gems: 100}, difficulty: 6},
            {name: 'ğŸ‘‘ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø§Ù„Ø¸Ù„Ø§Ù…', power: 10000, reward: {gold: 50000, gems: 250}, difficulty: 7}
        ];

        // Ø§Ø³ØªÙƒØ´Ø§Ù Ø£Ø¹Ø¯Ø§Ø¡ Ø¬Ø¯Ø¯
        function exploreWorld() {
            if (gameState.troops < 100) {
                showNotification('ØªØ­ØªØ§Ø¬ Ù„Ø¹Ø¯Ø¯ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ø¬Ù†ÙˆØ¯ Ù„Ù„Ø§Ø³ØªÙƒØ´Ø§Ù! âš”ï¸', 2000);
                return;
            }
            
            if (Math.random() > 0.3) { // 70% chance to find enemy
                const randomEnemy = enemyTypes[Math.floor(Math.random() * enemyTypes.length)];
                if (!discoveredEnemies.find(e => e.name === randomEnemy.name)) {
                    discoveredEnemies.push(randomEnemy);
                    showNotification(`ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø¹Ø¯Ùˆ Ø¬Ø¯ÙŠØ¯: ${randomEnemy.name}! ğŸ¯`, 4000);
                }
                startBattle(randomEnemy);
            } else {
                showNotification('Ù…Ù‡Ù…Ø© Ø§Ø³ØªÙƒØ´Ø§Ù ÙØ§Ø´Ù„Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ğŸ—ºï¸', 2000);
            }
        }

        // Ø¨Ø¯Ø¡ Ù…Ø¹Ø±ÙƒØ©
        function startBattle(enemy) {
            currentBattle = {
                enemy: enemy,
                phase: 'preparation',
                playerPower: gameState.troops * 2 + (gameState.buildings.length * 100),
                enemyPower: enemy.power
            };
            
            // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬Ù†ÙˆØ¯ Ù„Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯
            gameState.troops = Math.max(0, gameState.troops - 50);
            updateResourceDisplay('troops', gameState.troops);
            
            showBattleScreen();
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø¹Ø±ÙƒØ©
        function showBattleScreen() {
            const battleModal = createBattleModal();
            document.body.appendChild(battleModal);
            
            setTimeout(() => {
                battleModal.classList.add('show');
            }, 100);
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ø±ÙƒØ©
        function createBattleModal() {
            const modal = document.createElement('div');
            modal.className = 'battle-modal';
            modal.innerHTML = `
                <div class="battle-content">
                    <div class="battle-header">
                        <h2>âš”ï¸ Ù…Ø¹Ø±ÙƒØ© ${currentBattle.enemy.name}</h2>
                        <button onclick="closeBattle()" class="close-btn">âœ–ï¸</button>
                    </div>
                    
                    <div class="battle-stats">
                        <div class="player-stats">
                            <h3>ğŸ‘‘ Ù‚ÙˆØªÙƒ</h3>
                            <p>Ø§Ù„Ø¬Ù†ÙˆØ¯: ${currentBattle.playerPower}</p>
                            <div class="power-bar">
                                <div class="power-fill player" style="width: 100%"></div>
                            </div>
                        </div>
                        
                        <div class="vs">âš”ï¸</div>
                        
                        <div class="enemy-stats">
                            <h3>ğŸ’€ Ù‚ÙˆØ© Ø§Ù„Ø¹Ø¯Ùˆ</h3>
                            <p>${currentBattle.enemy.name}</p>
                            <div class="power-bar">
                                <div class="power-fill enemy" style="width: ${Math.min(100, (currentBattle.enemyPower / currentBattle.playerPower) * 100)}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="battle-actions">
                        <button onclick="attackEnemy()" class="attack-btn">âš”ï¸ Ù‡Ø¬ÙˆÙ… Ù…Ø¨Ø§Ø´Ø±</button>
                        <button onclick="useStrategy()" class="strategy-btn">ğŸ›¡ï¸ Ø¯ÙØ§Ø¹ Ø°ÙƒÙŠ</button>
                    </div>
                    
                    <div class="battle-info">
                        <h4>ğŸ† Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:</h4>
                        <p>ğŸ’° ${currentBattle.enemy.reward.gold} Ø°Ù‡Ø¨</p>
                        <p>ğŸ’ ${currentBattle.enemy.reward.gems} Ø£Ø­Ø¬Ø§Ø± ÙƒØ±ÙŠÙ…Ø©</p>
                    </div>
                </div>
            `;
            
            return modal;
        }

        // Ø§Ù„Ù‡Ø¬ÙˆÙ… Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
        function attackEnemy() {
            if (!currentBattle) return;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            const playerPower = currentBattle.playerPower + Math.floor(Math.random() * 200) - 100;
            const enemyPower = currentBattle.enemyPower;
            
            if (playerPower > enemyPower) {
                // Ø§Ù†ØªØµØ§Ø±
                gameState.gold += currentBattle.enemy.reward.gold;
                gameState.gems += currentBattle.enemy.reward.gems;
                gameState.troops += Math.floor(enemyPower / 10);
                
                updateResourceDisplay('gold', gameState.gold);
                updateResourceDisplay('gems', gameState.gems);
                updateResourceDisplay('troops', gameState.troops);
                
                // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ø§Ø±Ùƒ
                gameState.battlesWon = (gameState.battlesWon || 0) + 1;
                
                showNotification(`Ø§Ù†ØªØµØ§Ø±! âœ…ï¼Œè·å¾—äº† ${currentBattle.enemy.reward.gold} Ø°Ù‡Ø¨ Ùˆ ${currentBattle.enemy.reward.gems} Ø­Ø¬Ø± ÙƒØ±ÙŠÙ…!`, 5000);
                
            } else {
                // Ù‡Ø²ÙŠÙ…Ø©
                const casualties = Math.floor(gameState.troops * 0.3);
                gameState.troops = Math.max(0, gameState.troops - casualties);
                
                updateResourceDisplay('troops', gameState.troops);
                
                showNotification(`Ù‡Ø²ÙŠÙ…Ø©! ğŸ’€ ÙˆØ®Ø³Ø§Ø±Ø© ${casualties} Ø¬Ù†Ø¯ÙŠ`, 3000);
            }
            
            closeBattle();
        }

        // Ø§Ù„Ø¯ÙØ§Ø¹ Ø§Ù„Ø°ÙƒÙŠ
        function useStrategy() {
            if (!currentBattle) return;
            
            // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ØªØ¹Ø·ÙŠ ÙØ§Ø¦Ø¯Ø© ØµØºÙŠØ±Ø©
            const strategyBonus = currentBattle.playerPower * 0.2;
            const totalPlayerPower = currentBattle.playerPower + strategyBonus;
            
            if (totalPlayerPower > currentBattle.enemyPower) {
                // Ø§Ù†ØªØµØ§Ø± Ù…Ø¹ ÙØ§Ø¦Ø¯Ø© Ø¥Ø¶Ø§ÙÙŠØ©
                gameState.gold += currentBattle.enemy.reward.gold + 500;
                gameState.gems += currentBattle.enemy.reward.gems + 2;
                gameState.troops += Math.floor(enemyPower / 15);
                
                updateResourceDisplay('gold', gameState.gold);
                updateResourceDisplay('gems', gameState.gems);
                updateResourceDisplay('troops', gameState.troops);
                
                showNotification(`Ø§Ù†ØªØµØ§Ø± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ! ğŸ¯ï¼Œè·å¾—äº†é¢å¤–çš„ Ù…ÙƒØ§ÙØ¢Øª!`, 5000);
                
            } else {
                // Ù‡Ø²ÙŠÙ…Ø© Ù…Ø¹ Ø®Ø³Ø§Ø¦Ø± Ø£Ù‚Ù„
                const casualties = Math.floor(gameState.troops * 0.2);
                gameState.troops = Math.max(0, gameState.troops - casualties);
                
                updateResourceDisplay('troops', gameState.troops);
                
                showNotification(`Ù‡Ø²ÙŠÙ…Ø© Ø¯ÙØ§Ø¹ÙŠØ© ğŸ’€ï¼ŒØ®Ø³Ø§Ø±Ø© Ø£Ù‚Ù„ ${casualties} Ø¬Ù†Ø¯ÙŠ`, 3000);
            }
            
            closeBattle();
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¹Ø±ÙƒØ©
        function closeBattle() {
            const modal = document.querySelector('.battle-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
            currentBattle = null;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø²Ø±Ø§Ø¹Ø©
        function addFarmingButton() {
            const farmingButton = document.createElement('button');
            farmingButton.className = 'farming-btn';
            farmingButton.textContent = 'ğŸŒ¾ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø©';
            farmingButton.onclick = showFarmingModal;
            
            document.body.appendChild(farmingButton);
        }

        // Ø¹Ø±Ø¶ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø²Ø±Ø§Ø¹Ø©
        function showFarmingModal() {
            const modal = document.createElement('div');
            modal.className = 'farming-modal show';
            
            const farmersHtml = gameState.farmers.map(farmer => {
                const now = Date.now();
                const lastHarvest = gameState.harvestTimers[farmer.id] || 0;
                const timeDiff = now - lastHarvest;
                const cropInfo = cropSettings[farmer.crop];
                const isReady = timeDiff >= cropInfo.growthTime;
                const remainingTime = Math.max(0, cropInfo.growthTime - timeDiff);
                const seconds = Math.ceil(remainingTime / 1000);
                
                return `
                    <div class="farmer-card ${isReady ? 'farmer-ready' : ''}" data-farmer="${farmer.id}">
                        <div class="farmer-avatar">${farmer.avatar}</div>
                        <h3 class="farmer-name">${farmer.name}</h3>
                        <p class="farmer-skill">${farmer.skill}</p>
                        <p style="color: #28a745; font-size: 0.9rem;">
                            Ù…Ø¹Ø§Ù…Ù„Ø©: x${farmer.harvestBonus} ${cropInfo.name}
                        </p>
                        <div style="position: relative;">
                            <button class="harvest-btn" 
                                onclick="harvestCrop('${farmer.crop}', '${farmer.id}')" 
                                ${!isReady ? 'disabled' : ''}>
                                ${isReady ? 
                                    `ğŸŒ¾ Ø­ØµØ§Ø¯ ${cropInfo.name}` : 
                                    `â° ${seconds}Ø« Ù…ØªØ¨Ù‚ÙŠØ©`
                                }
                            </button>
                            ${!isReady ? `
                                <div class="harvest-timer">${seconds}Ø«</div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            modal.innerHTML = `
                <div class="farming-content">
                    <button class="close-farming" onclick="this.closest('.farming-modal').remove()">Ã—</button>
                    
                    <div class="farming-header">
                        <h1 class="farming-title">ğŸŒ¾ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø©</h1>
                        <p class="farming-subtitle">Ø£ÙˆÙ„Ø§Ø¯ Ø£Ù… Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ - Ø¹Ù…Ø§Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø©</p>
                        <p style="color: #28a745; font-size: 0.9rem; margin-top: 5px;">
                            ğŸ¥” + ğŸ«˜ + ğŸ¥• + ğŸŒ± = Ù…Ø­Ø§ØµÙŠÙ„Ù†Ø§ Ø§Ù„Ø£ØµÙŠÙ„Ø©!
                        </p>
                    </div>
                    
                    <div class="farmers-section">
                        ${farmersHtml}
                    </div>
                    
                    <div class="crops-section">
                        <h3 style="color: #ffd700; text-align: center; margin-bottom: 15px;">
                            ğŸ—„ï¸ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ
                        </h3>
                        ${Object.entries(gameState.crops).map(([crop, amount]) => `
                            <div class="crop-item">
                                <div class="crop-info">
                                    <span class="crop-emoji">${cropSettings[crop].emoji}</span>
                                    <span class="crop-name">${cropSettings[crop].name}</span>
                                </div>
                                <span class="crop-amount">${amount}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="buckets-section">
                        <h3 style="color: #ffd700; text-align: center; margin-bottom: 15px;">
                            ğŸª£ Ø§Ù„Ø¯Ù„Ø§Ø¡ (4 Ø£Ù†ÙˆØ§Ø¹)
                        </h3>
                        <p style="color: #20c997; text-align: center; margin-bottom: 10px; font-size: 0.8rem;">
                            ğŸ’¡ Ø§Ù„Ø¯Ù„Ø§Ø¡ ØªØ²ÙŠØ¯ Ù…Ù† Ù‚ÙˆØ© Ø§Ù„Ø­ØµØ§Ø¯!
                        </p>
                        ${Object.entries(gameState.buckets).map(([bucketType, bucket]) => `
                            <div class="bucket-item">
                                <div class="bucket-info">
                                    <span class="bucket-emoji">
                                        ${bucketType === 'red' ? 'ğŸ”´' : 
                                          bucketType === 'blue' ? 'ğŸ”µ' : 
                                          bucketType === 'green' ? 'ğŸŸ¢' : 'ğŸŸ¡'}
                                    </span>
                                    <span class="bucket-name">${bucket.name}</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="bucket-count" style="color: ${bucket.count > 0 ? '#ffd700' : '#6c757d'};">
                                        x${bucket.count}
                                    </span>
                                    <span style="color: ${bucket.count > 0 ? '#28a745' : '#6c757d'}; font-size: 0.8rem; font-weight: bold;">
                                        +${Math.round((bucket.bonus - 1) * 100)}%
                                    </span>
                                </div>
                            </div>
                        `).join('')}
                        <div style="margin-top: 10px; padding: 8px; background: rgba(212, 175, 55, 0.1); border-radius: 6px; text-align: center;">
                            <p style="color: #d4af37; font-size: 0.8rem; margin: 0;">
                                <strong>ğŸ¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</strong> 
                                ${Object.values(gameState.buckets).filter(b => b.count > 0).length > 0 ? 
                                    `x${Object.values(gameState.buckets).reduce((total, bucket) => total * (bucket.count > 0 ? bucket.bonus : 1), 1).toFixed(2)}` : 
                                    'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ù„Ø§Ø¡'}
                            </p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px; padding: 10px; background: rgba(32, 201, 151, 0.1); border-radius: 8px;">
                        <p style="color: #20c997; font-size: 0.9rem;">
                            ğŸŒ± <strong>Ù†ØµØ§Ø¦Ø­:</strong> ÙƒÙ„ Ø¹Ø§Ù…Ù„ ÙŠØ­ØªØ§Ø¬ ÙˆÙ‚ØªØ§Ù‹ Ù…Ø®ØªÙ„ÙØ§Ù‹ Ù„Ù„Ø­ØµØ§Ø¯!
                        </p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
            startTimerUpdates();
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø²Ù…Ù†ÙŠØ©
        function startTimerUpdates() {
            const interval = setInterval(() => {
                const modal = document.querySelector('.farming-modal');
                if (!modal) {
                    clearInterval(interval);
                    return;
                }
                
                gameState.farmers.forEach(farmer => {
                    const card = modal.querySelector(`[data-farmer="${farmer.id}"]`);
                    if (!card) return;
                    
                    const now = Date.now();
                    const lastHarvest = gameState.harvestTimers[farmer.id] || 0;
                    const timeDiff = now - lastHarvest;
                    const cropInfo = cropSettings[farmer.crop];
                    const isReady = timeDiff >= cropInfo.growthTime;
                    const remainingTime = Math.max(0, cropInfo.growthTime - timeDiff);
                    const seconds = Math.ceil(remainingTime / 1000);
                    
                    const button = card.querySelector('.harvest-btn');
                    const timer = card.querySelector('.harvest-timer');
                    
                    if (isReady) {
                        card.classList.add('farmer-ready');
                        button.disabled = false;
                        button.innerHTML = `ğŸŒ¾ Ø­ØµØ§Ø¯ ${cropInfo.name}`;
                        if (timer) timer.remove();
                    } else {
                        card.classList.remove('farmer-ready');
                        button.disabled = true;
                        button.innerHTML = `â° ${seconds}Ø« Ù…ØªØ¨Ù‚ÙŠØ©`;
                        
                        if (timer) {
                            timer.textContent = `${seconds}Ø«`;
                        } else {
                            const newTimer = document.createElement('div');
                            newTimer.className = 'harvest-timer';
                            newTimer.textContent = `${seconds}Ø«`;
                            card.querySelector('div[style*="position: relative"]').appendChild(newTimer);
                        }
                    }
                });
            }, 1000);
        }

        // Ø­ØµØ§Ø¯ Ø§Ù„Ù…Ø­ØµÙˆÙ„
        function harvestCrop(cropType, farmerId) {
            const farmer = gameState.farmers.find(f => f.id === farmerId);
            if (!farmer) return;
            
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙ‚ÙŠØª
            const now = Date.now();
            const lastHarvest = gameState.harvestTimers[farmerId] || 0;
            const timeDiff = now - lastHarvest;
            
            if (timeDiff < cropSettings[cropType].growthTime) {
                const remainingTime = Math.ceil((cropSettings[cropType].growthTime - timeDiff) / 1000);
                showNotification(`â° ${farmer.name} Ù…Ø§ Ø²Ø§Ù„ ÙŠØ­ØµØ¯... ${remainingTime} Ø«Ø§Ù†ÙŠØ© Ù…ØªØ¨Ù‚ÙŠØ©`, 2000);
                return;
            }
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©
            const baseReward = cropSettings[cropType].baseReward;
            const bonusReward = Math.floor(baseReward * farmer.harvestBonus);
            
            // Ø­Ø³Ø§Ø¨ Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø¯Ù„Ø§Ø¡
            let bucketBonus = 1.0;
            const totalBucketsOwned = Object.values(gameState.buckets).reduce((total, bucket) => total + bucket.count, 0);
            
            if (totalBucketsOwned > 0) {
                Object.values(gameState.buckets).forEach(bucket => {
                    if (bucket.count > 0) {
                        bucketBonus *= bucket.bonus;
                    }
                });
            }
            
            const finalReward = Math.floor(bonusReward * bucketBonus) + Math.floor(Math.random() * 20);
            const totalReward = finalReward;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­ØµÙˆÙ„ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†
            gameState.crops[cropType] = (gameState.crops[cropType] || 0) + totalReward;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙ‚ÙŠØª
            gameState.harvestTimers[farmerId] = now;
            
            // Ø±Ø³Ø§Ø¦Ù„ Ù…Ø¶Ø­ÙƒØ© Ù„Ù„Ø­ØµØ§Ø¯ (Ù…Ø¹ Ø°ÙƒØ± Ø§Ù„Ø¯Ù„Ø§Ø¡)
            const harvestMessages = [
                `ğŸ‰ ${farmer.name} Ø­ØµØ¯ ${totalReward} ${cropSettings[cropType].name}! ${totalBucketsOwned > 0 ? `ğŸª£ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¯Ù„Ø§Ø¡: x${bucketBonus.toFixed(2)}` : ''}`,
                `ğŸ¥• ${farmer.name} Ù‚Ø§Ù„: "Ø§Ù„ÙƒØ±ÙŠÙƒ Ø·ÙŠØ¨ Ù…Ø¹ Ø§Ù„Ø¯Ù„Ø§Ø¡!" Ø­ØµØ§Ø¯ ${totalReward}`,
                `ğŸŒ± ${farmer.name}: "Ø§Ù„Ø·ÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ø§ÙŠØ© Ø£ÙØ¶Ù„!" +${totalReward}`,
                `ğŸª£ ${farmer.name} ÙŠØ³ØªØ®Ø¯Ù… Ø¯Ù„ÙˆØ°Ù‡Ø¨ÙŠ! Ø­ØµØ§Ø¯ ${totalReward} ${cropSettings[cropType].name}`,
                `ğŸ‘¨â€ğŸŒ¾ ${farmer.name}: "Ø§Ù„Ø¯Ù„Ø§Ø¡ ØªØ²ÙŠØ¯ Ø§Ù„Ø¥Ù†ØªØ§Ø¬!" Ø­ØµØ§Ø¯ ${totalReward}`,
                `â­ ${farmer.name} ÙŠØ­ØµØ¯ ${cropSettings[cropType].name} Ø¨Ø§Ù„Ø¯Ù„Ø§Ø¡! ${totalReward}`,
                `ğŸ’ª ${farmer.name}: "Ø§Ù„Ø¯Ù„Ø§Ø¡ Ù‚ÙˆØ©!" +${totalReward}`,
                `ğŸŠ ${farmer.name} ÙŠØ­ØµØ¯ Ø¨Ø§Ù„Ø¯Ù„Ø§Ø¡! ${totalReward} ${cropSettings[cropType].name}`
            ];
            
            const randomMessage = harvestMessages[Math.floor(Math.random() * harvestMessages.length)];
            showNotification(randomMessage, 3000);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            updateCropsDisplay();
            
            // ÙØ­Øµ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
            checkFarmingAchievements();
        }

        // ÙØ­Øµ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹Ø©
        function checkFarmingAchievements() {
            // Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„
            const totalCrops = Object.values(gameState.crops).reduce((sum, amount) => sum + amount, 0);
            if (totalCrops >= 500) {
                addAchievementIfNotExists('farming_master');
            }
            
            // Ø¥Ù†Ø¬Ø§Ø² Ø­ØµØ§Ø¯ Ø§Ù„Ø¨Ø·Ø§Ø·Ø§
            if (gameState.crops.potato >= 200) {
                addAchievementIfNotExists('potato_king');
            }
            
            // Ø¥Ù†Ø¬Ø§Ø² Ø­ØµØ§Ø¯ Ø§Ù„Ø¨ØªØ¨Ø±ÙŠ
            if (gameState.crops.beans >= 200) {
                addAchievementIfNotExists('beans_master');
            }
            
            // Ø¥Ù†Ø¬Ø§Ø² Ø­ØµØ§Ø¯ Ø§Ù„ÙƒØ±ÙŠÙƒ
            if (gameState.crops.kreek >= 150) {
                addAchievementIfNotExists('kreek_expert');
            }
            
            // Ø¥Ù†Ø¬Ø§Ø² Ø­ØµØ§Ø¯ Ø§Ù„Ø·ÙˆØ±ÙŠØ§
            if (gameState.crops.toria >= 100) {
                addAchievementIfNotExists('toria_master');
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù ÙˆÙ…ØªØ¬Ø± Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
        function addExploreButton() {
            // Ø²Ø± Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù
            const exploreButton = document.createElement('button');
            exploreButton.className = 'explore-btn';
            exploreButton.textContent = 'ğŸ—ºï¸ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø¹Ø§Ù„Ù…';
            exploreButton.onclick = exploreWorld;

            // Ø²Ø± Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
            const achievementsButton = document.createElement('button');
            achievementsButton.className = 'achievements-btn';
            achievementsButton.textContent = 'ğŸ† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª';
            achievementsButton.onclick = showAchievements;

            document.body.appendChild(exploreButton);
            document.body.appendChild(achievementsButton);
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
        const achievements = [
            {id: 1, name: 'ğŸ—ï¸ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¨Ù†Ø§Ø¡', description: 'Ø¨Ù†ÙŠ 10 Ù…Ø¨Ø§Ù†ÙŠ', target: 10, current: 0, reward: {gold: 1000, gems: 5}, type: 'buildings'},
            {id: 2, name: 'ğŸ’° Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø°Ù‡Ø¨', description: 'Ø§Ø¬Ù…Ø¹ 100,000 Ø°Ù‡Ø¨', target: 100000, current: 0, reward: {gold: 5000, gems: 10}, type: 'gold'},
            {id: 3, name: 'âš”ï¸ Ù…Ø­Ø§Ø±Ø¨ Ù‚Ø¯ÙŠÙ…', description: 'Ø§ÙƒØ³Ø¨ 50 Ù…Ø¹Ø±ÙƒØ©', target: 50, current: 0, reward: {gold: 2000, gems: 15}, type: 'battles'},
            {id: 4, name: 'ğŸ‘¥ Ø±Ø§Ø¹ÙŠ Ø§Ù„Ø´Ø¹ÙˆØ¨', description: 'ØµÙ„ Ø¥Ù„Ù‰ 50,000 Ù†Ø³Ù…Ø©', target: 50000, current: 0, reward: {gold: 3000, gems: 8}, type: 'population'},
            {id: 5, name: 'âš¡ Ù…Ø§Ù„Ùƒ Ø§Ù„Ø·Ø§Ù‚Ø©', description: 'Ø§Ø³ØªÙ‡Ù„Ùƒ 10,000 Ø·Ø§Ù‚Ø©', target: 10000, current: 0, reward: {gold: 1500, gems: 12}, type: 'energy'},
            {id: 6, name: 'ğŸ° Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø¹Ø¸ÙŠÙ…', description: 'Ø§ØµÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 100', target: 100, current: 0, reward: {gold: 10000, gems: 50}, type: 'level'},
            {id: 7, name: 'ğŸ”¬ Ø¨Ø§Ø­Ø« Ø­ÙƒÙŠÙ…', description: 'Ø£ÙƒÙ…Ù„ 20 Ø¨Ø­Ø«', target: 20, current: 0, reward: {gold: 2500, gems: 20}, type: 'research'},
            {id: 8, name: 'âš”ï¸ ØµØ§Ø¦Ø¯ Ø§Ù„ØªÙ†Ø§Ù†ÙŠÙ†', description: 'Ø§Ù‡Ø²Ù… Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø§Ù„Ø¸Ù„Ø§Ù…', target: 1, current: 0, reward: {gold: 25000, gems: 100}, type: 'boss'},
            {id: 9, name: 'ğŸŒŸ Ù†Ø¬Ù… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©', description: 'Ø§Ø¯Ø±Ø³ 5,000 Ø¬Ù†Ø¯ÙŠ', target: 5000, current: 0, reward: {gold: 4000, gems: 25}, type: 'troops'},
            {id: 10, name: 'ğŸ’ Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø£Ø­Ø¬Ø§Ø±', description: 'Ø§Ø¬Ù…Ø¹ 500 Ø­Ø¬Ø± ÙƒØ±ÙŠÙ…', target: 500, current: 0, reward: {gold: 6000, gems: 75}, type: 'gems'},
            // Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            {id: 11, name: 'ğŸŒ± Ù…Ø²Ø§Ø±Ø¹ Ù…Ø¨ØªØ¯Ø¦', description: 'Ø§Ø¬Ù…Ø¹ 100 Ù…Ø­ØµÙˆÙ„', target: 100, current: 0, reward: {gold: 500, gems: 3}, type: 'total_crops'},
            {id: 12, name: 'ğŸ¥” Ù…Ù„Ùƒ Ø§Ù„Ø¨Ø·Ø§Ø·Ø§', description: 'Ø§Ø¬Ù…Ø¹ 200 Ø¨Ø·Ø§Ø·Ø§', target: 200, current: 0, reward: {gold: 1000, gems: 5}, type: 'potato'},
            {id: 13, name: 'ğŸ«˜ Ø³ÙŠØ¯ Ø§Ù„Ø¨ØªØ¨Ø±ÙŠ', description: 'Ø§Ø¬Ù…Ø¹ 200 Ø¨ØªØ¨Ø±ÙŠ', target: 200, current: 0, reward: {gold: 1000, gems: 5}, type: 'beans'},
            {id: 16, name: 'ğŸ¥• Ù…Ø¹Ù„Ù… Ø§Ù„ÙƒØ±ÙŠÙƒ', description: 'Ø§Ø¬Ù…Ø¹ 150 ÙƒØ±ÙŠÙƒØ±', target: 150, current: 0, reward: {gold: 1200, gems: 6}, type: 'kreek'},
            {id: 17, name: 'ğŸŒ± Ø³Ø§Ø­Ø± Ø§Ù„Ø·ÙˆØ±ÙŠØ§', description: 'Ø§Ø¬Ù…Ø¹ 100 Ø·ÙˆØ±ÙŠØ§', target: 100, current: 0, reward: {gold: 1500, gems: 8}, type: 'toria'},
            {id: 14, name: 'ğŸ‘¨â€ğŸŒ¾ Ø±Ø¦ÙŠØ³ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ÙŠÙ†', description: 'Ø§Ø¬Ù…Ø¹ 500 Ù…Ù† Ø£ÙŠ Ù…Ø­ØµÙˆÙ„', target: 500, current: 0, reward: {gold: 2000, gems: 10}, type: 'single_crop'},
            {id: 15, name: 'âš–ï¸ Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„', description: 'Ø§Ø¬Ù…Ø¹ 1000 Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø­Ø§ØµÙŠÙ„', target: 1000, current: 0, reward: {gold: 3000, gems: 15}, type: 'farming_master'}
        ];

        let playerAchievements = JSON.parse(localStorage.getItem('empireAchievements') || '[]');

        function showAchievements() {
            const modal = createAchievementsModal();
            document.body.appendChild(modal);
            
            setTimeout(() => {
                modal.classList.add('show');
            }, 100);
        }

        function createAchievementsModal() {
            const modal = document.createElement('div');
            modal.className = 'achievements-modal';
            
            let achievementsHTML = '<div class="achievements-content">';
            achievementsHTML += '<div class="achievements-header">';
            achievementsHTML += '<h2>ğŸ† Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</h2>';
            achievementsHTML += '<button onclick="closeAchievements()" class="close-btn">âœ–ï¸</button>';
            achievementsHTML += '</div>';
            achievementsHTML += '<div class="achievements-list">';
            
            achievements.forEach(achievement => {
                const isCompleted = playerAchievements.includes(achievement.id);
                const progress = Math.min(100, (achievement.current / achievement.target) * 100);
                const status = isCompleted ? 'completed' : (progress > 0 ? 'in-progress' : 'locked');
                
                achievementsHTML += `
                    <div class="achievement-item ${status}">
                        <div class="achievement-icon">${achievement.name.split(' ')[0]}</div>
                        <div class="achievement-info">
                            <h3>${achievement.name.split(' ').slice(1).join(' ')}</h3>
                            <p>${achievement.description}</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <span class="progress-text">${achievement.current} / ${achievement.target}</span>
                        </div>
                        <div class="achievement-reward">
                            <div class="reward-gold">${achievement.reward.gold} Ø°Ù‡Ø¨</div>
                            <div class="reward-gems">${achievement.reward.gems} Ø¬ÙˆÙ‡Ø±Ø©</div>
                        </div>
                    </div>
                `;
            });
            
            achievementsHTML += '</div></div>';
            modal.innerHTML = achievementsHTML;
            return modal;
        }

        function closeAchievements() {
            const modal = document.querySelector('.achievements-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }

        function checkAchievements() {
            achievements.forEach(achievement => {
                if (playerAchievements.includes(achievement.id)) return;
                
                let current = 0;
                switch(achievement.type) {
                    case 'buildings':
                        current = gameState.buildings.length;
                        break;
                    case 'gold':
                        current = gameState.gold;
                        break;
                    case 'battles':
                        current = gameState.battlesWon || 0;
                        break;
                    case 'population':
                        current = gameState.population;
                        break;
                    case 'energy':
                        current = gameState.energyConsumed || 0;
                        break;
                    case 'level':
                        current = gameState.empireLevel || 1;
                        break;
                    case 'research':
                        current = gameState.researchCompleted || 0;
                        break;
                    case 'troops':
                        current = gameState.troops;
                        break;
                    case 'gems':
                        current = gameState.gems;
                        break;
                    // Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                    case 'total_crops':
                        current = Object.values(gameState.crops).reduce((sum, amount) => sum + amount, 0);
                        break;
                    case 'potato':
                        current = gameState.crops.potato || 0;
                        break;
                    case 'beans':
                        current = gameState.crops.beans || 0;
                        break;
                    case 'kreek':
                        current = gameState.crops.kreek || 0;
                        break;
                    case 'toria':
                        current = gameState.crops.toria || 0;
                        break;
                    case 'single_crop':
                        current = Math.max(...Object.values(gameState.crops));
                        break;
                    case 'farming_master':
                        current = Object.values(gameState.crops).reduce((sum, amount) => sum + amount, 0);
                        break;
                }
                
                achievement.current = current;
                
                if (current >= achievement.target) {
                    // Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯!
                    playerAchievements.push(achievement.id);
                    localStorage.setItem('empireAchievements', JSON.stringify(playerAchievements));
                    
                    // Ù…Ù†Ø­ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
                    gameState.gold += achievement.reward.gold;
                    gameState.gems += achievement.reward.gems;
                    updateResourceDisplay('gold', gameState.gold);
                    updateResourceDisplay('gems', gameState.gems);
                    
                    showNotification(`ğŸ† Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯: ${achievement.name}!`, 5000);
                }
            });
        }

        function addAchievementIfNotExists(achievementId) {
            // ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
        }
    </script>
</body>
</html>